# Тест-кейсы: Корзина и оформление аренды

## TC-RENT-001: Добавление товара в корзину (Позитивный)

**Приоритет:** Критический  
**Предусловия:** Пользователь авторизован

### Шаги:
1. Открыть страницу товара
2. Нажать "Добавить в корзину"
3. Выбрать количество: 1
4. Выбрать даты: завтра на 3 дня
5. Нажать "Добавить в корзину"

### Ожидаемый результат:
- ✅ Товар добавлен в корзину
- ✅ Сообщение: "Товар добавлен в корзину"
- ✅ Перенаправление в корзину
- ✅ Товар отображается в корзине

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-002: Калькулятор стоимости (Позитивный)

**Приоритет:** Критический

### Шаги:
1. На странице добавления в корзину
2. Выбрать количество: 2
3. Выбрать период: 5 дней
4. Наблюдать расчет

### Ожидаемый результат:
- ✅ Калькулятор автоматически обновляется
- ✅ Отображается:
  - Цена за день
  - Количество
  - Дней аренды
  - Промежуточный итог
  - Скидка (если применима)
  - Итоговая сумма
- ✅ Формула: Цена × Количество × Дни - Скидка

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-003: Скидка за длительную аренду (Позитивный)

**Приоритет:** Высокий

### Тестовые данные:**
- Товар: Горные лыжи (1500 ₽/день)
- Количество: 1
- Период: 7 дней

### Шаги:
1. Выбрать период 7 дней
2. Проверить расчет

### Ожидаемый результат:
- ✅ Базовая стоимость: 1500 × 1 × 7 = 10500 ₽
- ✅ Скидка 10%: 1050 ₽
- ✅ Итого: 9450 ₽
- ✅ Отображается: "Скидка 10% за аренду от 7 дней!"

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-004: Изменение количества в корзине (Позитивный)

**Приоритет:** Высокий

### Шаги:
1. Добавить товар в корзину
2. В корзине изменить количество на 3
3. Дождаться обновления

### Ожидаемый результат:
- ✅ Количество обновлено
- ✅ Подытог пересчитан
- ✅ Общая сумма обновлена

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-005: Удаление из корзины (Позитивный)

**Приоритет:** Высокий

### Шаги:
1. Добавить товар в корзину
2. Нажать кнопку "Удалить"
3. Подтвердить удаление

### Ожидаемый результат:
- ✅ Товар удален из корзины
- ✅ Сообщение: "Товар удалён из корзины"
- ✅ Общая сумма обновлена

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-006: Оформление заказа (Позитивный)

**Приоритет:** Критический

### Шаги:
1. Добавить товары в корзину
2. Перейти в корзину
3. Нажать "Оформить заказ"
4. Добавить комментарий (опционально)
5. Нажать "Подтвердить заказ"

### Ожидаемый результат:
- ✅ Заказ создан в БД
- ✅ Статус: PENDING (Ожидает подтверждения)
- ✅ Корзина очищена
- ✅ Доступное количество товара уменьшено
- ✅ Сообщение: "Заказ №X успешно создан!"
- ✅ Перенаправление на страницу заказа

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-007: Попытка добавить больше доступного (Негативный)

**Приоритет:** Высокий  
**Предусловия:** Товар имеет 3 шт. в наличии

### Шаги:
1. Попытаться добавить 5 шт. товара

### Ожидаемый результат:
- ❌ Товар НЕ добавлен
- ✅ Ошибка: "Недостаточно товара в наличии"

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-008: Дата начала в прошлом (Негативный)

**Приоритет:** Высокий

### Шаги:
1. Выбрать дату начала вчерашним днем
2. Попытаться добавить в корзину

### Ожидаемый результат:
- ❌ Товар НЕ добавлен
- ✅ Ошибка: "Дата начала не может быть в прошлом"

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-009: Просмотр "Мои заказы" (Позитивный)

**Приоритет:** Высокий  
**Предусловия:** У пользователя есть заказы

### Шаги:
1. Перейти в "Мои заказы"

### Ожидаемый результат:
- ✅ Отображается список всех заказов пользователя
- ✅ Для каждого заказа показаны:
  - Номер заказа
  - Дата создания
  - Период аренды
  - Статус
  - Количество товаров
  - Общая сумма
  - Кнопка "Просмотр"

### Фактический результат:
**Статус:** ✅ PASSED

---

## TC-RENT-010: Детальный просмотр заказа (Позитивный)

**Приоритет:** Средний

### Шаги:
1. В "Мои заказы" нажать "Просмотр" на любом заказе

### Ожидаемый результат:
- ✅ Отображается детальная информация:
  - Номер и статус заказа
  - Даты создания и обновления
  - Период аренды
  - Список товаров с ценами
  - Общая сумма
  - Комментарий (если есть)
  - Кто подтвердил (если подтвержден)

### Фактический результат:
**Статус:** ✅ PASSED