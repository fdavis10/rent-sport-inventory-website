# Диаграмма деятельности: Тестирование функционала регистрации

## Описание

Диаграмма иллюстрирует процесс тестирования регистрации пользователя с различными исходами.

---

## Процесс тестирования регистрации
```
                    [НАЧАЛО]
                        │
                        ▼
        ┌───────────────────────────────────┐
        │  Открыть страницу регистрации     │
        └───────────────┬───────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────┐
        │  Заполнить поле Username          │
        └───────────────┬───────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────┐
        │  Заполнить Email                  │
        └───────────────┬───────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────┐
        │  Заполнить Имя и Фамилию          │
        └───────────────┬───────────────────┘
                        │
                        ▼
        ┌───────────────────────────────────┐
        │  Ввести пароль                    │
        └───────────────┬───────────────────┘
                        │
                        ▼
              ◇─────────────────────◇
              │ Пароль 4-16 символов?│
              ◇─────────────────────◇
                │              │
               ДА             НЕТ
                │              │
                │              ▼
                │     ┌──────────────────┐
                │     │ Ошибка: Длина    │
                │     │ пароля неверна   │
                │     └────────┬─────────┘
                │              │
                │              ▼
                │        [ТЕСТ FAILED]
                │
                ▼
      ◇─────────────────────◇
      │ Есть заглавные буквы?│
      ◇─────────────────────◇
        │              │
       ДА             НЕТ
        │              │
        │              ▼
        │     ┌──────────────────┐
        │     │ Ошибка: Нет      │
        │     │ заглавных букв   │
        │     └────────┬─────────┘
        │              │
        │              ▼
        │        [ТЕСТ FAILED]
        │
        ▼
◇─────────────────────◇
│ Есть цифры?         │
◇─────────────────────◇
  │              │
 ДА             НЕТ
  │              │
  │              ▼
  │     ┌──────────────────┐
  │     │ Ошибка: Нет цифр │
  │     └────────┬─────────┘
  │              │
  │              ▼
  │        [ТЕСТ FAILED]
  │
  ▼
◇─────────────────────────────◇
│ Нет запрещенных символов?   │
│ (* & { } | +)               │
◇─────────────────────────────◇
  │              │
 ДА             НЕТ
  │              │
  │              ▼
  │     ┌──────────────────────┐
  │     │ Ошибка: Запрещенные  │
  │     │ символы              │
  │     └────────┬─────────────┘
  │              │
  │              ▼
  │        [ТЕСТ FAILED]
  │
  ▼
┌───────────────────────────────┐
│ Подтвердить пароль            │
└───────────────┬───────────────┘
                │
                ▼
      ◇─────────────────────◇
      │ Пароли совпадают?    │
      ◇─────────────────────◇
        │              │
       ДА             НЕТ
        │              │
        │              ▼
        │     ┌──────────────────┐
        │     │ Ошибка: Пароли   │
        │     │ не совпадают     │
        │     └────────┬─────────┘
        │              │
        │              ▼
        │        [ТЕСТ FAILED]
        │
        ▼
┌───────────────────────────────┐
│ Нажать "Зарегистрироваться"   │
└───────────────┬───────────────┘
                │
                ▼
      ◇─────────────────────◇
      │ Email уникален?      │
      ◇─────────────────────◇
        │              │
       ДА             НЕТ
        │              │
        │              ▼
        │     ┌──────────────────┐
        │     │ Ошибка: Email    │
        │     │ уже существует   │
        │     └────────┬─────────┘
        │              │
        │              ▼
        │        [ТЕСТ FAILED]
        │
        ▼
      ◇─────────────────────◇
      │ Username уникален?   │
      ◇─────────────────────◇
        │              │
       ДА             НЕТ
        │              │
        │              ▼
        │     ┌──────────────────┐
        │     │ Ошибка: Username │
        │     │ уже существует   │
        │     └────────┬─────────┘
        │              │
        │              ▼
        │        [ТЕСТ FAILED]
        │
        ▼
┌───────────────────────────────┐
│ Создать пользователя в БД     │
└───────────────┬───────────────┘
                │
                ▼
┌───────────────────────────────┐
│ Автоматическая авторизация    │
└───────────────┬───────────────┘
                │
                ▼
┌───────────────────────────────┐
│ Перенаправление на главную    │
└───────────────┬───────────────┘
                │
                ▼
┌───────────────────────────────┐
│ Отображение сообщения успеха  │
└───────────────┬───────────────┘
                │
                ▼
          [ТЕСТ PASSED]
```

---

## Диаграмма деятельности: Процесс оформления аренды
```
                [НАЧАЛО]
                    │
                    ▼
    ┌───────────────────────────┐
    │ Открыть каталог           │
    └───────────┬───────────────┘
                │
                ▼
    ┌───────────────────────────┐
    │ Выбрать товар             │
    └───────────┬───────────────┘
                │
                ▼
    ┌───────────────────────────┐
    │ Нажать "Добавить в        │
    │ корзину"                  │
    └───────────┬───────────────┘
                │
                ▼
      ◇─────────────────◇
      │ Авторизован?    │
      ◇─────────────────◇
        │          │
       ДА         НЕТ
        │          │
        │          ▼
        │  ┌──────────────┐
        │  │ Перенаправить│
        │  │ на авторизацию
        │  └──────┬───────┘
        │         │
        │         ▼
        │   [Авторизация]
        │         │
        ◄─────────┘
        │
        ▼
┌───────────────────────────┐
│ Выбрать количество        │
└───────────┬───────────────┘
            │
            ▼
┌───────────────────────────┐
│ Выбрать даты аренды       │
└───────────┬───────────────┘
            │
            ▼
┌───────────────────────────┐
│ Система рассчитывает      │
│ стоимость (Калькулятор)   │◄── ВАЖНО!
│ • Дни = (конец-начало)+1  │
│ • База = цена×кол-во×дни  │
│ • Скидка (если есть)      │
│ • Итого = База - Скидка   │
└───────────┬───────────────┘
            │
            ▼
  ◇─────────────────────◇
  │ Доступно количество? │
  ◇─────────────────────◇
    │              │
   ДА             НЕТ
    │              │
    │              ▼
    │     ┌────────────────┐
    │     │ Ошибка:        │
    │     │ Недоступно     │
    │     └────────────────┘
    │              │
    │              ▼
    │        [ОТМЕНА]
    │
    ▼
┌───────────────────────────┐
│ Добавить в корзину        │
└───────────┬───────────────┘
            │
            ▼
  ◇─────────────────────◇
  │ Продолжить покупки? │
  ◇─────────────────────◇
    │              │
   ДА             НЕТ
    │              │
    ◄──────────┐   │
               │   ▼
      ┌────────┴───────────┐
      │ Открыть корзину    │
      └────────┬───────────┘
               │
               ▼
     ◇──────────────────◇
     │ Изменить товары? │
     ◇──────────────────◇
       │            │
      НЕТ          ДА
       │            │
       │            ▼
       │   ┌────────────────┐
       │   │ Изменить кол-во│
       │   │ или удалить    │
       │   └────────┬───────┘
       │            │
       ◄────────────┘
       │
       ▼
┌──────────────────────────┐
│ Нажать "Оформить заказ"  │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Проверить итоговую сумму │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Добавить комментарий     │
│ (опционально)            │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Подтвердить заказ        │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Система создает заказ    │
│ со статусом PENDING      │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Переносит позиции из     │
│ корзины в заказ          │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Уменьшает доступное      │
│ количество инвентаря     │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Очищает корзину          │
└───────────┬──────────────┘
            │
            ▼
┌──────────────────────────┐
│ Отображает номер заказа  │
│ и сообщение об успехе    │
└───────────┬──────────────┘
            │
            ▼
      [ЗАКАЗ СОЗДАН]
            │
            ▼
┌──────────────────────────┐
│ Менеджер подтверждает    │
│ заказ (меняет статус на  │
│ CONFIRMED или ACTIVE)    │
└──────────────────────────┘
```

---

## Легенда

- **Прямоугольник** - Действие/процесс
- **Ромб** - Условие/решение
- **Стрелка** - Поток выполнения
- **[ТЕКСТ]** - Конечное состояние

---

## Описание ключевых точек принятия решений

### 1. Проверка авторизации
- **Условие:** Пользователь авторизован?
- **ДА:** Переход к выбору параметров
- **НЕТ:** Перенаправление на страницу входа

### 2. Валидация пароля (цепочка проверок)
- Длина 4-16 символов
- Наличие заглавных букв
- Наличие цифр
- Отсутствие запрещенных символов

### 3. Проверка доступности товара
- **Условие:** Доступно достаточное количество?
- **ДА:** Добавление в корзину
- **НЕТ:** Ошибка, отмена операции

### 4. Продолжение покупок
- **ДА:** Возврат в каталог
- **НЕТ:** Переход в корзину